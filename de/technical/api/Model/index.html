<!--
Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to
deal in the Software without restriction, including without limitation the
rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
sell copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
IN THE SOFTWARE.
-->

<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Welcome to the documentation of the DemocracySim project and its accompanying master thesis.">
      
      
        <meta name="author" content="Paul KÃ¼hnel">
      
      
        <link rel="canonical" href="https://jurikane.github.io/DemocracySim/de/technical/api/Model/">
      
      
        <link rel="prev" href="../../technical_overview/">
      
      
        <link rel="next" href="../Area/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Model (Environment) - DemocracySim</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <link rel="stylesheet" href="../../../../assets/stylesheets/custom.7c86dd97.min.css">

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#class-participationmodel" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  For updates follow <strong>@democracysim</strong> on
  <a rel="me" href="https://defcon.social/@democracysim">
    <span class="twemoji mastodon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.5 102.5 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5m-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
    </span>
    <strong>DemocracySim</strong>
  </a>

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href="../../../" title="DemocracySim" class="md-header__button md-logo" aria-label="DemocracySim" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DemocracySim
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Model (Environment)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.04 7 9.54s-2.94 8.27-7 9.54c.95.3 1.95.46 3 .46a10 10 0 0 0 10-10A10 10 0 0 0 9 2"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Sprache wechseln">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../../technical/api/Model/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="de" class="md-select__link">
              Deutsch
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Teilen" aria-label="Teilen" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="ZurÃ¼cksetzen" aria-label="ZurÃ¼cksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/jurikane/DemocracySim" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 0c4.42 0 8 3.58 8 8a8.01 8.01 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27s-1.36.09-2 .27c-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Hauptnavigation" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../teaser/" class="md-tabs__link">
        
  
  
    
  
  Teaser

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../research/research_concept/" class="md-tabs__link">
          
  
  
    
  
  Research

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../technical_overview/" class="md-tabs__link">
          
  
  
    
  
  Technical

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../mesa_docs/" class="md-tabs__link">
        
  
  
    
  
  Mesa

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../" title="DemocracySim" class="md-nav__button md-logo" aria-label="DemocracySim" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DemocracySim
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/jurikane/DemocracySim" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 0c4.42 0 8 3.58 8 8a8.01 8.01 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27s-1.36.09-2 .27c-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../teaser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teaser
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Research
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Research
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../research/research_concept/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concept
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../research/metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../research/goals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Goals
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Technical
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Technical
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Model (Environment)
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Model (Environment)
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel" class="md-nav__link">
    <span class="md-ellipsis">
      ParticipationModel
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.adjust_color_pattern" class="md-nav__link">
    <span class="md-ellipsis">
      adjust_color_pattern
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.color_by_dst" class="md-nav__link">
    <span class="md-ellipsis">
      color_by_dst
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.color_patches" class="md-nav__link">
    <span class="md-ellipsis">
      color_patches
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.create_all_options" class="md-nav__link">
    <span class="md-ellipsis">
      create_all_options
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.create_color_distribution" class="md-nav__link">
    <span class="md-ellipsis">
      create_color_distribution
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.create_personalities" class="md-nav__link">
    <span class="md-ellipsis">
      create_personalities
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.init_color_probs" class="md-nav__link">
    <span class="md-ellipsis">
      init_color_probs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.initialize_all_areas" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_all_areas
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.initialize_area" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_area
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.initialize_global_area" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_global_area
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.initialize_voting_agents" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_voting_agents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.pers_dist" class="md-nav__link">
    <span class="md-ellipsis">
      pers_dist
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.step" class="md-nav__link">
    <span class="md-ellipsis">
      step
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#democracy_sim.participation_model.ParticipationModel.update_av_area_color_dst" class="md-nav__link">
    <span class="md-ellipsis">
      update_av_area_color_dst
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Area/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Area (Territory)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ColorCell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grid Cell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VoteAgent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Voting Agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../inherited/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inherited Classes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Utility_functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utility Functions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../mesa_docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mesa
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/jurikane/DemocracySim/edit/dev/docs/technical/api/Model.md" title="Seite editieren" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg>
    </a>
  
  


<h1 id="class-participationmodel">Class <code>ParticipationModel</code></h1>


<div class="doc doc-object doc-class">



<a id="democracy_sim.participation_model.ParticipationModel"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="mesa.Model" href="../../../../technical/api/inherited/#mesa.Model">Model</a></code></p>


        <p>The ParticipationModel class provides a base environment for
multi-agent simulations within a grid-based world (split into territories)
that reacts dynamically to frequently held collective decision-making
processes ("elections"). It incorporates voting agents with personalities,
color cells (grid fields), and areas (election territories). This model is
designed to analyze different voting rules and their impact.</p>
<p>This class provides mechanisms for creating and managing cells, agents,
and areas, along with data collection for analysis. Colors in the model
mutate depending on a predefined mutation rate and are influenced by
elections. Agents interact based on their personalities, knowledge, and
experiences.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.grid">grid</span></code></td>
            <td>
                  <code><span title="mesa.space.SingleGrid">SingleGrid</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Grid representing the environment
with a single occupancy per cell (the color).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.height">height</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The height of the grid.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.width">width</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The width of the grid.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.colors">colors</span></code></td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Array containing the unique color identifiers.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.voting_rule">voting_rule</span></code></td>
            <td>
                  <code><span title="Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function defining the social welfare
function to aggregate agent preferences. This callable typically
takes agent rankings as input and returns a single aggregate result.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.distance_func">distance_func</span></code></td>
            <td>
                  <code><span title="Callable">Callable</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A function used to calculate a
distance metric when comparing rankings. It takes two rankings
and returns a numeric distance score.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.mu">mu</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mutation rate; the probability of each color cell to mutate
after an elections.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.color_probs">color_probs</span></code></td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Probabilities used to determine individual color mutation outcomes.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.options">options</span></code></td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Matrix (array of arrays) where each subarray
represents an option (color-ranking) available to agents.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.option_vec">option_vec</span></code></td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Array holding the indices of the available options
for computational efficiency.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.color_cells">color_cells</span></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="democracy_sim.participation_agent.ColorCell" href="../../../../technical/api/ColorCell/#democracy_sim.participation_agent.ColorCell">ColorCell</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of all color cells.
Initialized during the model setup.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.voting_agents">voting_agents</span></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="democracy_sim.participation_agent.VoteAgent" href="../../../../technical/api/VoteAgent/#democracy_sim.participation_agent.VoteAgent">VoteAgent</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of all voting agents.
Initialized during the model setup.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.personalities">personalities</span></code></td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of unique personalities available for agents.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.personality_distribution">personality_distribution</span></code></td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The (global) probability
distribution of personalities among all agents.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.areas">areas</span></code></td>
            <td>
                  <code><span title="list">list</span>[<a class="autorefs autorefs-internal" title="democracy_sim.participation_model.Area" href="../../../../technical/api/Area/#democracy_sim.participation_model.Area">Area</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of areas (regions or territories within the
grid) in which elections take place. Initialized during model setup.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.global_area">global_area</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="democracy_sim.participation_model.Area" href="../../../../technical/api/Area/#democracy_sim.participation_model.Area">Area</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The area encompassing the entire grid.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.av_area_height">av_area_height</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Average height of areas in the simulation.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.av_area_width">av_area_width</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Average width of areas created in the simulation.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.area_size_variance">area_size_variance</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Variance in area sizes to introduce
non-uniformity among election territories.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.common_assets">common_assets</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total resources to be distributed among all agents.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.av_area_color_dst">av_area_color_dst</span></code></td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current (area)-average color distribution.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.election_costs">election_costs</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cost associated with participating in elections.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.max_reward">max_reward</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum reward possible for an agent each election.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.known_cells">known_cells</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of cells each agent knows the color of.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.datacollector">datacollector</span></code></td>
            <td>
                  <code><span title="mesa.DataCollector">DataCollector</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tool for collecting data
(metrics and statistics) at each simulation step.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.scheduler">scheduler</span></code></td>
            <td>
                  <code><span title="democracy_sim.participation_model.CustomScheduler">CustomScheduler</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The scheduler responsible for executing the
step function.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel.draw_borders">draw_borders</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Only for visualization (no effect on simulation).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="democracy_sim.participation_model.ParticipationModel._preset_color_dst">_preset_color_dst</span></code></td>
            <td>
                  <code><span title="ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A predefined global color distribution
(set randomly) that affects cell initialization globally.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span>
<span class="normal">984</span>
<span class="normal">985</span>
<span class="normal">986</span>
<span class="normal">987</span>
<span class="normal">988</span>
<span class="normal">989</span>
<span class="normal">990</span>
<span class="normal">991</span>
<span class="normal">992</span>
<span class="normal">993</span>
<span class="normal">994</span>
<span class="normal">995</span>
<span class="normal">996</span>
<span class="normal">997</span>
<span class="normal">998</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">ParticipationModel</span><span class="p">(</span><span class="n">mesa</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The ParticipationModel class provides a base environment for</span>
<span class="sd">    multi-agent simulations within a grid-based world (split into territories)</span>
<span class="sd">    that reacts dynamically to frequently held collective decision-making</span>
<span class="sd">    processes (&quot;elections&quot;). It incorporates voting agents with personalities,</span>
<span class="sd">    color cells (grid fields), and areas (election territories). This model is</span>
<span class="sd">    designed to analyze different voting rules and their impact.</span>

<span class="sd">    This class provides mechanisms for creating and managing cells, agents,</span>
<span class="sd">    and areas, along with data collection for analysis. Colors in the model</span>
<span class="sd">    mutate depending on a predefined mutation rate and are influenced by</span>
<span class="sd">    elections. Agents interact based on their personalities, knowledge, and</span>
<span class="sd">    experiences.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        grid (mesa.space.SingleGrid): Grid representing the environment</span>
<span class="sd">            with a single occupancy per cell (the color).</span>
<span class="sd">        height (int): The height of the grid.</span>
<span class="sd">        width (int): The width of the grid.</span>
<span class="sd">        colors (ndarray): Array containing the unique color identifiers.</span>
<span class="sd">        voting_rule (Callable): A function defining the social welfare</span>
<span class="sd">            function to aggregate agent preferences. This callable typically</span>
<span class="sd">            takes agent rankings as input and returns a single aggregate result.</span>
<span class="sd">        distance_func (Callable): A function used to calculate a</span>
<span class="sd">            distance metric when comparing rankings. It takes two rankings</span>
<span class="sd">            and returns a numeric distance score.</span>
<span class="sd">        mu (float): Mutation rate; the probability of each color cell to mutate</span>
<span class="sd">            after an elections.</span>
<span class="sd">        color_probs (ndarray):</span>
<span class="sd">            Probabilities used to determine individual color mutation outcomes.</span>
<span class="sd">        options (ndarray): Matrix (array of arrays) where each subarray</span>
<span class="sd">            represents an option (color-ranking) available to agents.</span>
<span class="sd">        option_vec (ndarray): Array holding the indices of the available options</span>
<span class="sd">            for computational efficiency.</span>
<span class="sd">        color_cells (list[ColorCell]): List of all color cells.</span>
<span class="sd">            Initialized during the model setup.</span>
<span class="sd">        voting_agents (list[VoteAgent]): List of all voting agents.</span>
<span class="sd">            Initialized during the model setup.</span>
<span class="sd">        personalities (list): List of unique personalities available for agents.</span>
<span class="sd">        personality_distribution (ndarray): The (global) probability</span>
<span class="sd">            distribution of personalities among all agents.</span>
<span class="sd">        areas (list[Area]): List of areas (regions or territories within the</span>
<span class="sd">            grid) in which elections take place. Initialized during model setup.</span>
<span class="sd">        global_area (Area): The area encompassing the entire grid.</span>
<span class="sd">        av_area_height (int): Average height of areas in the simulation.</span>
<span class="sd">        av_area_width (int): Average width of areas created in the simulation.</span>
<span class="sd">        area_size_variance (float): Variance in area sizes to introduce</span>
<span class="sd">            non-uniformity among election territories.</span>
<span class="sd">        common_assets (int): Total resources to be distributed among all agents.</span>
<span class="sd">        av_area_color_dst (ndarray): Current (area)-average color distribution.</span>
<span class="sd">        election_costs (float): Cost associated with participating in elections.</span>
<span class="sd">        max_reward (float): Maximum reward possible for an agent each election.</span>
<span class="sd">        known_cells (int): Number of cells each agent knows the color of.</span>
<span class="sd">        datacollector (mesa.DataCollector): A tool for collecting data</span>
<span class="sd">            (metrics and statistics) at each simulation step.</span>
<span class="sd">        scheduler (CustomScheduler): The scheduler responsible for executing the</span>
<span class="sd">            step function.</span>
<span class="sd">        draw_borders (bool): Only for visualization (no effect on simulation).</span>
<span class="sd">        _preset_color_dst (ndarray): A predefined global color distribution</span>
<span class="sd">            (set randomly) that affects cell initialization globally.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">num_agents</span><span class="p">,</span> <span class="n">num_colors</span><span class="p">,</span> <span class="n">num_personalities</span><span class="p">,</span>
                 <span class="n">mu</span><span class="p">,</span> <span class="n">election_impact_on_mutation</span><span class="p">,</span> <span class="n">common_assets</span><span class="p">,</span> <span class="n">known_cells</span><span class="p">,</span>
                 <span class="n">num_areas</span><span class="p">,</span> <span class="n">av_area_height</span><span class="p">,</span> <span class="n">av_area_width</span><span class="p">,</span> <span class="n">area_size_variance</span><span class="p">,</span>
                 <span class="n">patch_power</span><span class="p">,</span> <span class="n">color_patches_steps</span><span class="p">,</span> <span class="n">draw_borders</span><span class="p">,</span> <span class="n">heterogeneity</span><span class="p">,</span>
                 <span class="n">rule_idx</span><span class="p">,</span> <span class="n">distance_idx</span><span class="p">,</span> <span class="n">election_costs</span><span class="p">,</span> <span class="n">max_reward</span><span class="p">,</span>
                 <span class="n">show_area_stats</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="c1"># TODO clean up class (public/private variables)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">num_colors</span><span class="p">)</span>
        <span class="c1"># Create a scheduler that goes through areas first then color cells</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scheduler</span> <span class="o">=</span> <span class="n">CustomScheduler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># The grid</span>
        <span class="c1"># SingleGrid enforces at most one agent per cell;</span>
        <span class="c1"># MultiGrid allows multiple agents to be in the same cell.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">mesa</span><span class="o">.</span><span class="n">space</span><span class="o">.</span><span class="n">SingleGrid</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">torus</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># Random bias factors that affect the initial color distribution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_bias</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_bias</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_borders</span> <span class="o">=</span> <span class="n">draw_borders</span>
        <span class="c1"># Color distribution (global)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_preset_color_dst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_color_distribution</span><span class="p">(</span><span class="n">heterogeneity</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_av_area_color_dst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_preset_color_dst</span>
        <span class="c1"># Elections</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">election_costs</span> <span class="o">=</span> <span class="n">election_costs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_reward</span> <span class="o">=</span> <span class="n">max_reward</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">known_cells</span> <span class="o">=</span> <span class="n">known_cells</span>  <span class="c1"># Integer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">voting_rule</span> <span class="o">=</span> <span class="n">social_welfare_functions</span><span class="p">[</span><span class="n">rule_idx</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">distance_func</span> <span class="o">=</span> <span class="n">distance_functions</span><span class="p">[</span><span class="n">distance_idx</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_all_options</span><span class="p">(</span><span class="n">num_colors</span><span class="p">)</span>
        <span class="c1"># Simulation variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mu</span> <span class="o">=</span> <span class="n">mu</span>  <span class="c1"># Mutation rate for the color cells (0.1 = 10 % mutate)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">common_assets</span> <span class="o">=</span> <span class="n">common_assets</span>
        <span class="c1"># Election impact factor on color mutation through a probability array</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_probs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">init_color_probs</span><span class="p">(</span><span class="n">election_impact_on_mutation</span><span class="p">)</span>
        <span class="c1"># Create search pairs once for faster iterations when comparing rankings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_pairs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>  <span class="c1"># TODO check if correct!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">option_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>  <span class="c1"># Also to speed up</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_search_pairs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">combinations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">num_colors</span><span class="p">),</span> <span class="mi">2</span><span class="p">))</span>
        <span class="c1"># Create color cells</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_cells</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">ColorCell</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">height</span> <span class="o">*</span> <span class="n">width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_color_cells</span><span class="p">()</span>
        <span class="c1"># Create agents</span>
        <span class="c1"># TODO: Where do the agents get there known cells from and how!?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">voting_agents</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">VoteAgent</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">num_agents</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">personalities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_personalities</span><span class="p">(</span><span class="n">num_personalities</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">personality_distribution</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pers_dist</span><span class="p">(</span><span class="n">num_personalities</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize_voting_agents</span><span class="p">()</span>
        <span class="c1"># Area variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">global_area</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize_global_area</span><span class="p">()</span>  <span class="c1"># TODO create bool variable to make this optional</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">Area</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">num_areas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">av_area_height</span> <span class="o">=</span> <span class="n">av_area_height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">av_area_width</span> <span class="o">=</span> <span class="n">av_area_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">area_size_variance</span> <span class="o">=</span> <span class="n">area_size_variance</span>
        <span class="c1"># Adjust the color pattern to make it less random (see color patches)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_color_pattern</span><span class="p">(</span><span class="n">color_patches_steps</span><span class="p">,</span> <span class="n">patch_power</span><span class="p">)</span>
        <span class="c1"># Create areas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize_all_areas</span><span class="p">()</span>
        <span class="c1"># Data collector</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datacollector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize_datacollector</span><span class="p">()</span>
        <span class="c1"># Collect initial data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datacollector</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># Statistics</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_area_stats</span> <span class="o">=</span> <span class="n">show_area_stats</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">num_colors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colors</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">av_area_color_dst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_av_area_color_dst</span>

    <span class="nd">@av_area_color_dst</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">av_area_color_dst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_av_area_color_dst</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">num_agents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">voting_agents</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">num_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">preset_color_dst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preset_color_dst</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_initialize_color_cells</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method initializes a color cells for each cell in the model&#39;s grid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create a color cell for each cell in the grid</span>
        <span class="k">for</span> <span class="n">unique_id</span><span class="p">,</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">))</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">coord_iter</span><span class="p">()):</span>
            <span class="c1"># The colors are chosen by a predefined color distribution</span>
            <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_by_dst</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preset_color_dst</span><span class="p">)</span>
            <span class="c1"># Create the cell</span>
            <span class="n">cell</span> <span class="o">=</span> <span class="n">ColorCell</span><span class="p">(</span><span class="n">unique_id</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">),</span> <span class="n">color</span><span class="p">)</span>
            <span class="c1"># Add it to the grid</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">place_agent</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">))</span>
            <span class="c1"># Add the color cell to the scheduler</span>
            <span class="c1">#self.scheduler.add(cell) # TODO: check speed diffs using this..</span>
            <span class="c1"># And to the &#39;model.color_cells&#39; list (for faster access)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">color_cells</span><span class="p">[</span><span class="n">unique_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">cell</span>  <span class="c1"># TODO: check if its not better to simply use the grid when finally changing the grid type to SingleGrid</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">initialize_voting_agents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method initializes as many voting agents as set in the model with</span>
<span class="sd">        a randomly chosen personality. It places them randomly on the grid.</span>
<span class="sd">        It also ensures that each agent is assigned to the color cell it is</span>
<span class="sd">        standing on.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">personality_distribution</span>
        <span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">common_assets</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_agents</span>
        <span class="k">for</span> <span class="n">a_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_agents</span><span class="p">):</span>
            <span class="c1"># Get a random position</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
            <span class="n">personality</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">personalities</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">dist</span><span class="p">)</span>
            <span class="c1"># Create agent without appending (add to the pre-defined list)</span>
            <span class="n">agent</span> <span class="o">=</span> <span class="n">VoteAgent</span><span class="p">(</span><span class="n">a_id</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">personality</span><span class="p">,</span>
                              <span class="n">assets</span><span class="o">=</span><span class="n">assets</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># TODO: initial assets?!</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">voting_agents</span><span class="p">[</span><span class="n">a_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">agent</span>  <span class="c1"># Add using the index (faster)</span>
            <span class="c1"># Add the agent to the grid by placing it on a cell</span>
            <span class="n">cell</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">get_cell_list_contents</span><span class="p">([(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
                <span class="n">cell</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">ColorCell</span><span class="p">,</span> <span class="n">cell</span><span class="p">)</span>
            <span class="n">cell</span><span class="o">.</span><span class="n">add_agent</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_color_probs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">election_impact</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method initializes a probability array for the mutation of colors.</span>
<span class="sd">        The probabilities reflect the election outcome with some impact factor.</span>

<span class="sd">        Args:</span>
<span class="sd">            election_impact (float): The impact the election has on the mutation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">**</span> <span class="n">election_impact</span>
        <span class="c1"># Normalize</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">p</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">p</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">initialize_area</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method initializes one area in the models&#39; grid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">area</span> <span class="o">=</span> <span class="n">Area</span><span class="p">(</span><span class="n">a_id</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">av_area_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">av_area_width</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">area_size_variance</span><span class="p">)</span>
        <span class="c1"># Place the area in the grid using its indexing field</span>
        <span class="c1"># this adds the corresponding color cells and voting agents to the area</span>
        <span class="n">area</span><span class="o">.</span><span class="n">idx_field</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">)</span>
        <span class="c1"># Save in the models&#39; areas-list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">[</span><span class="n">a_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">area</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">initialize_all_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes all areas on the grid in the model.</span>

<span class="sd">        This method divides the grid into approximately evenly distributed areas,</span>
<span class="sd">        ensuring that the areas are spaced as uniformly as possible based</span>
<span class="sd">        on the grid dimensions and the average area size specified by</span>
<span class="sd">        `av_area_width` and `av_area_height`.</span>

<span class="sd">        The grid may contain more or fewer areas than an exact square</span>
<span class="sd">        grid arrangement due to `num_areas` not always being a perfect square.</span>
<span class="sd">        If the number of areas is not a perfect square, the remaining areas</span>
<span class="sd">        are placed randomly on the grid to ensure that `num_areas`</span>
<span class="sd">        areas are initialized.</span>

<span class="sd">        Args:</span>
<span class="sd">            None.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None. initializes `num_areas` and places them directly on the grid.</span>

<span class="sd">        Raises:</span>
<span class="sd">            None, but if `self.num_areas == 0`, the method exits early.</span>

<span class="sd">        Example:</span>
<span class="sd">            - Given `num_areas = 4` and `grid.width = grid.height = 10`,</span>
<span class="sd">              this method might initialize areas with approximate distances</span>
<span class="sd">              to maximize uniform distribution (like a 2x2 grid).</span>
<span class="sd">            - For `num_areas = 5`, four areas will be initialized evenly, and</span>
<span class="sd">              the fifth will be placed randomly due to the uneven distribution.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_areas</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="c1"># Calculate the number of areas in each direction</span>
        <span class="n">roo_apx</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_areas</span><span class="p">))</span>
        <span class="n">nr_areas_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">av_area_width</span>
        <span class="n">nr_areas_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">av_area_height</span>
        <span class="c1"># Calculate the distance between the areas</span>
        <span class="n">area_x_dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="n">roo_apx</span>
        <span class="n">area_y_dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="n">roo_apx</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;roo_apx: </span><span class="si">{</span><span class="n">roo_apx</span><span class="si">}</span><span class="s2">, nr_areas_x: </span><span class="si">{</span><span class="n">nr_areas_x</span><span class="si">}</span><span class="s2">, &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;nr_areas_y: </span><span class="si">{</span><span class="n">nr_areas_y</span><span class="si">}</span><span class="s2">, area_x_dist: </span><span class="si">{</span><span class="n">area_x_dist</span><span class="si">}</span><span class="s2">, &quot;</span>
              <span class="sa">f</span><span class="s2">&quot;area_y_dist: </span><span class="si">{</span><span class="n">area_y_dist</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># TODO rm print</span>
        <span class="n">x_coords</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">area_x_dist</span><span class="p">)</span>
        <span class="n">y_coords</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">area_y_dist</span><span class="p">)</span>
        <span class="c1"># Add additional areas if necessary (num_areas not a square number)</span>
        <span class="n">additional_x</span><span class="p">,</span> <span class="n">additional_y</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_areas</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_coords</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">y_coords</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">missing</span><span class="p">):</span>
            <span class="n">additional_x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span><span class="p">))</span>
            <span class="n">additional_y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span><span class="p">))</span>
        <span class="c1"># Create the area&#39;s ids</span>
        <span class="n">a_ids</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_areas</span><span class="p">))</span>
        <span class="c1"># Initialize all areas</span>
        <span class="k">for</span> <span class="n">x_coord</span> <span class="ow">in</span> <span class="n">x_coords</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y_coord</span> <span class="ow">in</span> <span class="n">y_coords</span><span class="p">:</span>
                <span class="n">a_id</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">a_ids</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">a_id</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">initialize_area</span><span class="p">(</span><span class="n">a_id</span><span class="p">,</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">additional_x</span><span class="p">,</span> <span class="n">additional_y</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initialize_area</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">a_ids</span><span class="p">),</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">initialize_global_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method initializes the global area spanning the whole grid.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Area: The global area (with unique_id set to -1 and idx to (0, 0)).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">global_area</span> <span class="o">=</span> <span class="n">Area</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Place the area in the grid using its indexing field</span>
        <span class="c1"># this adds the corresponding color cells and voting agents to the area</span>
        <span class="n">global_area</span><span class="o">.</span><span class="n">idx_field</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">global_area</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">create_personalities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates n unique &quot;personalities,&quot; where a &quot;personality&quot; is a specific</span>
<span class="sd">        permutation of self.num_colors color indices.</span>

<span class="sd">        Args:</span>
<span class="sd">            n (int): Number of unique personalities to generate.</span>

<span class="sd">        Returns:</span>
<span class="sd">            np.ndarray: Array of shape `(n, num_colors)`.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If `n` exceeds the possible unique permutations.</span>

<span class="sd">        Example:</span>
<span class="sd">            for n=2 and self.num_colors=3, the function could return:</span>

<span class="sd">            [[1, 0, 2],</span>
<span class="sd">            [2, 1, 0]]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># p_colors = range(1, self.num_colors)  # Personalities exclude white</span>
        <span class="n">max_permutations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">max_permutations</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot generate </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2"> unique personalities: &quot;</span>
                             <span class="sa">f</span><span class="s2">&quot;only </span><span class="si">{</span><span class="n">max_permutations</span><span class="si">}</span><span class="s2"> unique ones exist.&quot;</span><span class="p">)</span>
        <span class="n">selected_permutations</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">selected_permutations</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="c1"># Sample a permutation lazily and add it to the set</span>
            <span class="n">perm</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">),</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">))</span>
            <span class="n">selected_permutations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">perm</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">selected_permutations</span><span class="p">))</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">initialize_datacollector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">color_data</span> <span class="o">=</span> <span class="p">{</span><span class="sa">f</span><span class="s2">&quot;Color </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">get_color_distribution_function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>
                      <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">)}</span>
        <span class="k">return</span> <span class="n">mesa</span><span class="o">.</span><span class="n">DataCollector</span><span class="p">(</span>
            <span class="n">model_reporters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;Collective assets&quot;</span><span class="p">:</span> <span class="n">compute_collective_assets</span><span class="p">,</span>
                <span class="s2">&quot;Gini Index (0-100)&quot;</span><span class="p">:</span> <span class="n">compute_gini_index</span><span class="p">,</span>
                <span class="s2">&quot;Voter turnout globally (in percent)&quot;</span><span class="p">:</span> <span class="n">get_voter_turnout</span><span class="p">,</span>
                <span class="o">**</span><span class="n">color_data</span>
            <span class="p">},</span>
            <span class="n">agent_reporters</span><span class="o">=</span><span class="p">{</span>
                <span class="c1"># &quot;Voter Turnout&quot;: lambda a: a.voter_turnout if isinstance(a, Area) else None,</span>
                <span class="c1"># &quot;Color Distribution&quot;: lambda a: a.color_distribution if isinstance(a, Area) else None,</span>
                <span class="c1">#</span>
                <span class="c1">#&quot;VoterTurnout&quot;: lambda a: a.voter_turnout if isinstance(a, Area) else None,</span>
                <span class="s2">&quot;VoterTurnout&quot;</span><span class="p">:</span> <span class="n">get_area_voter_turnout</span><span class="p">,</span>
                <span class="s2">&quot;DistToReality&quot;</span><span class="p">:</span> <span class="n">get_area_dist_to_reality</span><span class="p">,</span>
                <span class="s2">&quot;ColorDistribution&quot;</span><span class="p">:</span> <span class="n">get_area_color_distribution</span><span class="p">,</span>
                <span class="s2">&quot;ElectionResults&quot;</span><span class="p">:</span> <span class="n">get_election_results</span><span class="p">,</span>
                <span class="c1"># &quot;Personality-Based Reward&quot;: get_area_personality_based_reward,</span>
                <span class="c1"># &quot;Gini Index&quot;: get_area_gini_index</span>
            <span class="p">},</span>
            <span class="c1"># tables={</span>
            <span class="c1">#    &quot;AreaData&quot;: [&quot;Step&quot;, &quot;AreaID&quot;, &quot;ColorDistribution&quot;,</span>
            <span class="c1">#                 &quot;VoterTurnout&quot;]</span>
            <span class="c1"># }</span>
        <span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Advance the model by one step.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Conduct elections in the areas</span>
        <span class="c1"># and then mutate the color cells according to election outcomes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scheduler</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
        <span class="c1"># Update the global color distribution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_av_area_color_dst</span><span class="p">()</span>
        <span class="c1"># Collect data for monitoring and data analysis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">datacollector</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">adjust_color_pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color_patches_steps</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">patch_power</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adjusting the color pattern to make it less predictable.</span>

<span class="sd">        Args:</span>
<span class="sd">            color_patches_steps: How often to run the color-patches step.</span>
<span class="sd">            patch_power: The power of the patching (like a radius of impact).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cells</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_cells</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">color_patches_steps</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Color adjustment step </span><span class="si">{</span><span class="n">_</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">cells</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">cells</span><span class="p">:</span>
                <span class="n">most_common_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_patches</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">patch_power</span><span class="p">)</span>
                <span class="n">cell</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">most_common_color</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">create_color_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heterogeneity</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to create a color distribution that has a bias</span>
<span class="sd">        according to the given heterogeneity factor.</span>

<span class="sd">        Args:</span>
<span class="sd">            heterogeneity (float): Factor used as sigma in &#39;random.gauss&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">)</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">heterogeneity</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
        <span class="c1"># Normalize (with float division)</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="n">dst_array</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span> <span class="o">/</span> <span class="n">total</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">dst_array</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">color_patches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cell</span><span class="p">:</span> <span class="n">ColorCell</span><span class="p">,</span> <span class="n">patch_power</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to create a less random initial color distribution</span>
<span class="sd">        using a similar logic to the color patches model.</span>
<span class="sd">        It uses a (normalized) bias coordinate to center the impact of the</span>
<span class="sd">        color patches structures impact around.</span>

<span class="sd">        Args:</span>
<span class="sd">            cell: The cell that may change its color accordingly</span>
<span class="sd">            patch_power: Like a radius of impact around the bias point.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The consensus color or the cell&#39;s own color if no consensus.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Calculate the normalized position of the cell</span>
        <span class="n">normalized_x</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">row</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
        <span class="n">normalized_y</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">col</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="c1"># Calculate the distance of the cell to the bias point</span>
        <span class="n">bias_factor</span> <span class="o">=</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">normalized_x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_bias</span><span class="p">)</span>
                       <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">normalized_y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_bias</span><span class="p">))</span>
        <span class="c1"># The closer the cell to the bias-point, the less often it is</span>
        <span class="c1"># to be replaced by a color chosen from the initial distribution:</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">patch_power</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">bias_factor</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_by_dst</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preset_color_dst</span><span class="p">)</span>
        <span class="c1"># Otherwise, apply the color patches logic</span>
        <span class="n">neighbor_cells</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">get_neighbors</span><span class="p">((</span><span class="n">cell</span><span class="o">.</span><span class="n">row</span><span class="p">,</span> <span class="n">cell</span><span class="o">.</span><span class="n">col</span><span class="p">),</span>
                                                 <span class="n">moore</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                                 <span class="n">include_center</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">color_counts</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Count neighbors&#39; colors</span>
        <span class="k">for</span> <span class="n">neighbor</span> <span class="ow">in</span> <span class="n">neighbor_cells</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">neighbor</span><span class="p">,</span> <span class="n">ColorCell</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">neighbor</span><span class="o">.</span><span class="n">color</span>
                <span class="n">color_counts</span><span class="p">[</span><span class="n">color</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">color_counts</span><span class="p">:</span>
            <span class="n">max_count</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">color_counts</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="n">most_common_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span> <span class="k">for</span> <span class="n">color</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">color_counts</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                                  <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="n">max_count</span><span class="p">]</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">most_common_colors</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cell</span><span class="o">.</span><span class="n">color</span>  <span class="c1"># Return the cell&#39;s own color if no consensus</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">update_av_area_color_dst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method updates the av_area_color_dst attribute of the model.</span>
<span class="sd">        Beware: On overlapping areas, cells are counted several times.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sums</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
            <span class="n">sums</span> <span class="o">+=</span> <span class="n">area</span><span class="o">.</span><span class="n">color_distribution</span>
        <span class="c1"># Return the average color distributions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">av_area_color_dst</span> <span class="o">=</span> <span class="n">sums</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_areas</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">pers_dist</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method creates a normalized normal distribution array for picking</span>
<span class="sd">        and depicting the distribution of personalities in the model.</span>

<span class="sd">        Args:</span>
<span class="sd">            size: The mean value of the normal distribution.</span>

<span class="sd">        Returns:</span>
<span class="sd">            np.array: Normalized (sum is one) array mimicking a gaussian curve.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Generate a normal distribution</span>
        <span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
        <span class="n">dist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>  <span class="c1"># To create a gaussian curve like array</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">dist</span><span class="p">)</span>  <span class="c1"># Flip negative values &quot;up&quot;</span>
        <span class="c1"># Normalize the distribution to sum to one</span>
        <span class="n">dist</span> <span class="o">/=</span> <span class="n">dist</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">dist</span>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_all_options</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">include_ties</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a matrix (an array of all possible ranking vectors),</span>
<span class="sd">        if specified including ties.</span>
<span class="sd">        Rank values start from 0.</span>

<span class="sd">        Args:</span>
<span class="sd">            n (int): The number of items to rank (number of colors in our case)</span>
<span class="sd">            include_ties (bool): If True, rankings include ties.</span>

<span class="sd">        Returns:</span>
<span class="sd">            np.array: A matrix containing all possible ranking vectors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">include_ties</span><span class="p">:</span>
            <span class="c1"># Create all possible combinations and sort out invalid rankings</span>
            <span class="c1"># i.e. [1, 1, 1] or [1, 2, 2] aren&#39;t valid as no option is ranked first.</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">comb</span><span class="p">)</span> <span class="k">for</span> <span class="n">comb</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">repeat</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
                          <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">comb</span><span class="p">)))</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">comb</span><span class="p">)])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">permutations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">))])</span>
        <span class="k">return</span> <span class="n">r</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">color_by_dst</span><span class="p">(</span><span class="n">color_distribution</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects a color (int) from range(len(color_distribution))</span>
<span class="sd">        based on the given color_distribution array, where each entry represents</span>
<span class="sd">        the probability of selecting that index.</span>

<span class="sd">        Args:</span>
<span class="sd">            color_distribution: Array determining the selection probabilities.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The selected index based on the given probabilities.</span>

<span class="sd">        Example:</span>
<span class="sd">            color_distribution = [0.2, 0.3, 0.5]</span>
<span class="sd">            Color 1 will be selected with a probability of 0.3.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">color_distribution</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-8</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The color_distribution array must sum to 1.&quot;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>  <span class="c1"># Random float between 0 and 1</span>
        <span class="n">cumulative_sum</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">color_idx</span><span class="p">,</span> <span class="n">prob</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">color_distribution</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">prob</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;color_distribution contains negative value.&quot;</span><span class="p">)</span>
            <span class="n">cumulative_sum</span> <span class="o">+=</span> <span class="n">prob</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">cumulative_sum</span><span class="p">:</span>  <span class="c1"># Compare r against the cumulative probability</span>
                <span class="k">return</span> <span class="n">color_idx</span>

        <span class="c1"># This point should never be reached.</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected error in color_distribution.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.adjust_color_pattern" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">adjust_color_pattern</span><span class="p">(</span><span class="n">color_patches_steps</span><span class="p">,</span> <span class="n">patch_power</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Adjusting the color pattern to make it less predictable.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>color_patches_steps</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>How often to run the color-patches step.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>patch_power</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The power of the patching (like a radius of impact).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">adjust_color_pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color_patches_steps</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">patch_power</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adjusting the color pattern to make it less predictable.</span>

<span class="sd">    Args:</span>
<span class="sd">        color_patches_steps: How often to run the color-patches step.</span>
<span class="sd">        patch_power: The power of the patching (like a radius of impact).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cells</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_cells</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">color_patches_steps</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Color adjustment step </span><span class="si">{</span><span class="n">_</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">cells</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">cells</span><span class="p">:</span>
            <span class="n">most_common_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_patches</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">patch_power</span><span class="p">)</span>
            <span class="n">cell</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">most_common_color</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.color_by_dst" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">color_by_dst</span><span class="p">(</span><span class="n">color_distribution</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Selects a color (int) from range(len(color_distribution))
based on the given color_distribution array, where each entry represents
the probability of selecting that index.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>color_distribution</code>
            </td>
            <td>
                  <code><span title="numpy.array">array</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Array determining the selection probabilities.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The selected index based on the given probabilities.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>color_distribution = [0.2, 0.3, 0.5]
Color 1 will be selected with a probability of 0.3.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span>
<span class="normal">975</span>
<span class="normal">976</span>
<span class="normal">977</span>
<span class="normal">978</span>
<span class="normal">979</span>
<span class="normal">980</span>
<span class="normal">981</span>
<span class="normal">982</span>
<span class="normal">983</span>
<span class="normal">984</span>
<span class="normal">985</span>
<span class="normal">986</span>
<span class="normal">987</span>
<span class="normal">988</span>
<span class="normal">989</span>
<span class="normal">990</span>
<span class="normal">991</span>
<span class="normal">992</span>
<span class="normal">993</span>
<span class="normal">994</span>
<span class="normal">995</span>
<span class="normal">996</span>
<span class="normal">997</span>
<span class="normal">998</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">color_by_dst</span><span class="p">(</span><span class="n">color_distribution</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Selects a color (int) from range(len(color_distribution))</span>
<span class="sd">    based on the given color_distribution array, where each entry represents</span>
<span class="sd">    the probability of selecting that index.</span>

<span class="sd">    Args:</span>
<span class="sd">        color_distribution: Array determining the selection probabilities.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The selected index based on the given probabilities.</span>

<span class="sd">    Example:</span>
<span class="sd">        color_distribution = [0.2, 0.3, 0.5]</span>
<span class="sd">        Color 1 will be selected with a probability of 0.3.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">color_distribution</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1e-8</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The color_distribution array must sum to 1.&quot;</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>  <span class="c1"># Random float between 0 and 1</span>
    <span class="n">cumulative_sum</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">color_idx</span><span class="p">,</span> <span class="n">prob</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">color_distribution</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">prob</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;color_distribution contains negative value.&quot;</span><span class="p">)</span>
        <span class="n">cumulative_sum</span> <span class="o">+=</span> <span class="n">prob</span>
        <span class="k">if</span> <span class="n">r</span> <span class="o">&lt;</span> <span class="n">cumulative_sum</span><span class="p">:</span>  <span class="c1"># Compare r against the cumulative probability</span>
            <span class="k">return</span> <span class="n">color_idx</span>

    <span class="c1"># This point should never be reached.</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected error in color_distribution.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.color_patches" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">color_patches</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">patch_power</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>This method is used to create a less random initial color distribution
using a similar logic to the color patches model.
It uses a (normalized) bias coordinate to center the impact of the
color patches structures impact around.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>cell</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="democracy_sim.participation_agent.ColorCell" href="../../../../technical/api/ColorCell/#democracy_sim.participation_agent.ColorCell">ColorCell</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The cell that may change its color accordingly</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>patch_power</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Like a radius of impact around the bias point.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>int</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The consensus color or the cell's own color if no consensus.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">color_patches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cell</span><span class="p">:</span> <span class="n">ColorCell</span><span class="p">,</span> <span class="n">patch_power</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method is used to create a less random initial color distribution</span>
<span class="sd">    using a similar logic to the color patches model.</span>
<span class="sd">    It uses a (normalized) bias coordinate to center the impact of the</span>
<span class="sd">    color patches structures impact around.</span>

<span class="sd">    Args:</span>
<span class="sd">        cell: The cell that may change its color accordingly</span>
<span class="sd">        patch_power: Like a radius of impact around the bias point.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The consensus color or the cell&#39;s own color if no consensus.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Calculate the normalized position of the cell</span>
    <span class="n">normalized_x</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">row</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>
    <span class="n">normalized_y</span> <span class="o">=</span> <span class="n">cell</span><span class="o">.</span><span class="n">col</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
    <span class="c1"># Calculate the distance of the cell to the bias point</span>
    <span class="n">bias_factor</span> <span class="o">=</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">normalized_x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_horizontal_bias</span><span class="p">)</span>
                   <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">normalized_y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertical_bias</span><span class="p">))</span>
    <span class="c1"># The closer the cell to the bias-point, the less often it is</span>
    <span class="c1"># to be replaced by a color chosen from the initial distribution:</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">patch_power</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">bias_factor</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_by_dst</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_preset_color_dst</span><span class="p">)</span>
    <span class="c1"># Otherwise, apply the color patches logic</span>
    <span class="n">neighbor_cells</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">get_neighbors</span><span class="p">((</span><span class="n">cell</span><span class="o">.</span><span class="n">row</span><span class="p">,</span> <span class="n">cell</span><span class="o">.</span><span class="n">col</span><span class="p">),</span>
                                             <span class="n">moore</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                             <span class="n">include_center</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">color_counts</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Count neighbors&#39; colors</span>
    <span class="k">for</span> <span class="n">neighbor</span> <span class="ow">in</span> <span class="n">neighbor_cells</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">neighbor</span><span class="p">,</span> <span class="n">ColorCell</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">neighbor</span><span class="o">.</span><span class="n">color</span>
            <span class="n">color_counts</span><span class="p">[</span><span class="n">color</span><span class="p">]</span> <span class="o">=</span> <span class="n">color_counts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">color_counts</span><span class="p">:</span>
        <span class="n">max_count</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">color_counts</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="n">most_common_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">color</span> <span class="k">for</span> <span class="n">color</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">color_counts</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                              <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="n">max_count</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">most_common_colors</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cell</span><span class="o">.</span><span class="n">color</span>  <span class="c1"># Return the cell&#39;s own color if no consensus</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.create_all_options" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_all_options</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">include_ties</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Creates a matrix (an array of all possible ranking vectors),
if specified including ties.
Rank values start from 0.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>n</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of items to rank (number of colors in our case)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_ties</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, rankings include ties.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.array: A matrix containing all possible ranking vectors.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span>
<span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_all_options</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">include_ties</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a matrix (an array of all possible ranking vectors),</span>
<span class="sd">    if specified including ties.</span>
<span class="sd">    Rank values start from 0.</span>

<span class="sd">    Args:</span>
<span class="sd">        n (int): The number of items to rank (number of colors in our case)</span>
<span class="sd">        include_ties (bool): If True, rankings include ties.</span>

<span class="sd">    Returns:</span>
<span class="sd">        np.array: A matrix containing all possible ranking vectors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">include_ties</span><span class="p">:</span>
        <span class="c1"># Create all possible combinations and sort out invalid rankings</span>
        <span class="c1"># i.e. [1, 1, 1] or [1, 2, 2] aren&#39;t valid as no option is ranked first.</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">comb</span><span class="p">)</span> <span class="k">for</span> <span class="n">comb</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">repeat</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
                      <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">comb</span><span class="p">)))</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">comb</span><span class="p">)])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">permutations</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">))])</span>
    <span class="k">return</span> <span class="n">r</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.create_color_distribution" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_color_distribution</span><span class="p">(</span><span class="n">heterogeneity</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>This method is used to create a color distribution that has a bias
according to the given heterogeneity factor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>heterogeneity</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Factor used as sigma in 'random.gauss'.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_color_distribution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">heterogeneity</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method is used to create a color distribution that has a bias</span>
<span class="sd">    according to the given heterogeneity factor.</span>

<span class="sd">    Args:</span>
<span class="sd">        heterogeneity (float): Factor used as sigma in &#39;random.gauss&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">heterogeneity</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>
    <span class="c1"># Normalize (with float division)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
    <span class="n">dst_array</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span> <span class="o">/</span> <span class="n">total</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">values</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">dst_array</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.create_personalities" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_personalities</span><span class="p">(</span><span class="n">n</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Creates n unique "personalities," where a "personality" is a specific
permutation of self.num_colors color indices.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>n</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of unique personalities to generate.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.ndarray: Array of shape <code>(n, num_colors)</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If <code>n</code> exceeds the possible unique permutations.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <p>for n=2 and self.num_colors=3, the function could return:</p>
<p>[[1, 0, 2],
[2, 1, 0]]</p>
</details>

            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_personalities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates n unique &quot;personalities,&quot; where a &quot;personality&quot; is a specific</span>
<span class="sd">    permutation of self.num_colors color indices.</span>

<span class="sd">    Args:</span>
<span class="sd">        n (int): Number of unique personalities to generate.</span>

<span class="sd">    Returns:</span>
<span class="sd">        np.ndarray: Array of shape `(n, num_colors)`.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If `n` exceeds the possible unique permutations.</span>

<span class="sd">    Example:</span>
<span class="sd">        for n=2 and self.num_colors=3, the function could return:</span>

<span class="sd">        [[1, 0, 2],</span>
<span class="sd">        [2, 1, 0]]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># p_colors = range(1, self.num_colors)  # Personalities exclude white</span>
    <span class="n">max_permutations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">max_permutations</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot generate </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2"> unique personalities: &quot;</span>
                         <span class="sa">f</span><span class="s2">&quot;only </span><span class="si">{</span><span class="n">max_permutations</span><span class="si">}</span><span class="s2"> unique ones exist.&quot;</span><span class="p">)</span>
    <span class="n">selected_permutations</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">selected_permutations</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="c1"># Sample a permutation lazily and add it to the set</span>
        <span class="n">perm</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">),</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">))</span>
        <span class="n">selected_permutations</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">perm</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">selected_permutations</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.init_color_probs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init_color_probs</span><span class="p">(</span><span class="n">election_impact</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>This method initializes a probability array for the mutation of colors.
The probabilities reflect the election outcome with some impact factor.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>election_impact</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The impact the election has on the mutation.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_color_probs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">election_impact</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method initializes a probability array for the mutation of colors.</span>
<span class="sd">    The probabilities reflect the election outcome with some impact factor.</span>

<span class="sd">    Args:</span>
<span class="sd">        election_impact (float): The impact the election has on the mutation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="o">**</span> <span class="n">election_impact</span>
    <span class="c1"># Normalize</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">p</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">p</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.initialize_all_areas" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_all_areas</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Initializes all areas on the grid in the model.</p>
<p>This method divides the grid into approximately evenly distributed areas,
ensuring that the areas are spaced as uniformly as possible based
on the grid dimensions and the average area size specified by
<code>av_area_width</code> and <code>av_area_height</code>.</p>
<p>The grid may contain more or fewer areas than an exact square
grid arrangement due to <code>num_areas</code> not always being a perfect square.
If the number of areas is not a perfect square, the remaining areas
are placed randomly on the grid to ensure that <code>num_areas</code>
areas are initialized.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None. initializes <code>num_areas</code> and places them directly on the grid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <ul>
<li>Given <code>num_areas = 4</code> and <code>grid.width = grid.height = 10</code>,
  this method might initialize areas with approximate distances
  to maximize uniform distribution (like a 2x2 grid).</li>
<li>For <code>num_areas = 5</code>, four areas will be initialized evenly, and
  the fifth will be placed randomly due to the uneven distribution.</li>
</ul>
</details>

            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_all_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes all areas on the grid in the model.</span>

<span class="sd">    This method divides the grid into approximately evenly distributed areas,</span>
<span class="sd">    ensuring that the areas are spaced as uniformly as possible based</span>
<span class="sd">    on the grid dimensions and the average area size specified by</span>
<span class="sd">    `av_area_width` and `av_area_height`.</span>

<span class="sd">    The grid may contain more or fewer areas than an exact square</span>
<span class="sd">    grid arrangement due to `num_areas` not always being a perfect square.</span>
<span class="sd">    If the number of areas is not a perfect square, the remaining areas</span>
<span class="sd">    are placed randomly on the grid to ensure that `num_areas`</span>
<span class="sd">    areas are initialized.</span>

<span class="sd">    Args:</span>
<span class="sd">        None.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None. initializes `num_areas` and places them directly on the grid.</span>

<span class="sd">    Raises:</span>
<span class="sd">        None, but if `self.num_areas == 0`, the method exits early.</span>

<span class="sd">    Example:</span>
<span class="sd">        - Given `num_areas = 4` and `grid.width = grid.height = 10`,</span>
<span class="sd">          this method might initialize areas with approximate distances</span>
<span class="sd">          to maximize uniform distribution (like a 2x2 grid).</span>
<span class="sd">        - For `num_areas = 5`, four areas will be initialized evenly, and</span>
<span class="sd">          the fifth will be placed randomly due to the uneven distribution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_areas</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="c1"># Calculate the number of areas in each direction</span>
    <span class="n">roo_apx</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_areas</span><span class="p">))</span>
    <span class="n">nr_areas_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">av_area_width</span>
    <span class="n">nr_areas_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">av_area_height</span>
    <span class="c1"># Calculate the distance between the areas</span>
    <span class="n">area_x_dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span> <span class="o">//</span> <span class="n">roo_apx</span>
    <span class="n">area_y_dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span> <span class="o">//</span> <span class="n">roo_apx</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;roo_apx: </span><span class="si">{</span><span class="n">roo_apx</span><span class="si">}</span><span class="s2">, nr_areas_x: </span><span class="si">{</span><span class="n">nr_areas_x</span><span class="si">}</span><span class="s2">, &quot;</span>
          <span class="sa">f</span><span class="s2">&quot;nr_areas_y: </span><span class="si">{</span><span class="n">nr_areas_y</span><span class="si">}</span><span class="s2">, area_x_dist: </span><span class="si">{</span><span class="n">area_x_dist</span><span class="si">}</span><span class="s2">, &quot;</span>
          <span class="sa">f</span><span class="s2">&quot;area_y_dist: </span><span class="si">{</span><span class="n">area_y_dist</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># TODO rm print</span>
    <span class="n">x_coords</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">area_x_dist</span><span class="p">)</span>
    <span class="n">y_coords</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">area_y_dist</span><span class="p">)</span>
    <span class="c1"># Add additional areas if necessary (num_areas not a square number)</span>
    <span class="n">additional_x</span><span class="p">,</span> <span class="n">additional_y</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="n">missing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_areas</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_coords</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">y_coords</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">missing</span><span class="p">):</span>
        <span class="n">additional_x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">width</span><span class="p">))</span>
        <span class="n">additional_y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">height</span><span class="p">))</span>
    <span class="c1"># Create the area&#39;s ids</span>
    <span class="n">a_ids</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_areas</span><span class="p">))</span>
    <span class="c1"># Initialize all areas</span>
    <span class="k">for</span> <span class="n">x_coord</span> <span class="ow">in</span> <span class="n">x_coords</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">y_coord</span> <span class="ow">in</span> <span class="n">y_coords</span><span class="p">:</span>
            <span class="n">a_id</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">a_ids</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">a_id</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initialize_area</span><span class="p">(</span><span class="n">a_id</span><span class="p">,</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">additional_x</span><span class="p">,</span> <span class="n">additional_y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize_area</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">a_ids</span><span class="p">),</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.initialize_area" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_area</span><span class="p">(</span><span class="n">a_id</span><span class="p">,</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>This method initializes one area in the models' grid.</p>


            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_area</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method initializes one area in the models&#39; grid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">area</span> <span class="o">=</span> <span class="n">Area</span><span class="p">(</span><span class="n">a_id</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">av_area_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">av_area_width</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">area_size_variance</span><span class="p">)</span>
    <span class="c1"># Place the area in the grid using its indexing field</span>
    <span class="c1"># this adds the corresponding color cells and voting agents to the area</span>
    <span class="n">area</span><span class="o">.</span><span class="n">idx_field</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_coord</span><span class="p">,</span> <span class="n">y_coord</span><span class="p">)</span>
    <span class="c1"># Save in the models&#39; areas-list</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">[</span><span class="n">a_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">area</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.initialize_global_area" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_global_area</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>This method initializes the global area spanning the whole grid.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Area</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The global area (with unique_id set to -1 and idx to (0, 0)).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_global_area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method initializes the global area spanning the whole grid.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Area: The global area (with unique_id set to -1 and idx to (0, 0)).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">global_area</span> <span class="o">=</span> <span class="n">Area</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="c1"># Place the area in the grid using its indexing field</span>
    <span class="c1"># this adds the corresponding color cells and voting agents to the area</span>
    <span class="n">global_area</span><span class="o">.</span><span class="n">idx_field</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">global_area</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.initialize_voting_agents" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_voting_agents</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>This method initializes as many voting agents as set in the model with
a randomly chosen personality. It places them randomly on the grid.
It also ensures that each agent is assigned to the color cell it is
standing on.</p>


            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_voting_agents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method initializes as many voting agents as set in the model with</span>
<span class="sd">    a randomly chosen personality. It places them randomly on the grid.</span>
<span class="sd">    It also ensures that each agent is assigned to the color cell it is</span>
<span class="sd">    standing on.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">personality_distribution</span>
    <span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
    <span class="n">assets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">common_assets</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_agents</span>
    <span class="k">for</span> <span class="n">a_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_agents</span><span class="p">):</span>
        <span class="c1"># Get a random position</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
        <span class="n">personality</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">personalities</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">dist</span><span class="p">)</span>
        <span class="c1"># Create agent without appending (add to the pre-defined list)</span>
        <span class="n">agent</span> <span class="o">=</span> <span class="n">VoteAgent</span><span class="p">(</span><span class="n">a_id</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">personality</span><span class="p">,</span>
                          <span class="n">assets</span><span class="o">=</span><span class="n">assets</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># TODO: initial assets?!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">voting_agents</span><span class="p">[</span><span class="n">a_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">agent</span>  <span class="c1"># Add using the index (faster)</span>
        <span class="c1"># Add the agent to the grid by placing it on a cell</span>
        <span class="n">cell</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="o">.</span><span class="n">get_cell_list_contents</span><span class="p">([(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)])[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">TYPE_CHECKING</span><span class="p">:</span>
            <span class="n">cell</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">ColorCell</span><span class="p">,</span> <span class="n">cell</span><span class="p">)</span>
        <span class="n">cell</span><span class="o">.</span><span class="n">add_agent</span><span class="p">(</span><span class="n">agent</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.pers_dist" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pers_dist</span><span class="p">(</span><span class="n">size</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>This method creates a normalized normal distribution array for picking
and depicting the distribution of personalities in the model.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>size</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The mean value of the normal distribution.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>np.array: Normalized (sum is one) array mimicking a gaussian curve.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">pers_dist</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method creates a normalized normal distribution array for picking</span>
<span class="sd">    and depicting the distribution of personalities in the model.</span>

<span class="sd">    Args:</span>
<span class="sd">        size: The mean value of the normal distribution.</span>

<span class="sd">    Returns:</span>
<span class="sd">        np.array: Normalized (sum is one) array mimicking a gaussian curve.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Generate a normal distribution</span>
    <span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>
    <span class="n">dist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>  <span class="c1"># To create a gaussian curve like array</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">dist</span><span class="p">)</span>  <span class="c1"># Flip negative values &quot;up&quot;</span>
    <span class="c1"># Normalize the distribution to sum to one</span>
    <span class="n">dist</span> <span class="o">/=</span> <span class="n">dist</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">dist</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.step" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">step</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Advance the model by one step.</p>


            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Advance the model by one step.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Conduct elections in the areas</span>
    <span class="c1"># and then mutate the color cells according to election outcomes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scheduler</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
    <span class="c1"># Update the global color distribution</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_av_area_color_dst</span><span class="p">()</span>
    <span class="c1"># Collect data for monitoring and data analysis</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">datacollector</span><span class="o">.</span><span class="n">collect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="democracy_sim.participation_model.ParticipationModel.update_av_area_color_dst" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_av_area_color_dst</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>This method updates the av_area_color_dst attribute of the model.
Beware: On overlapping areas, cells are counted several times.</p>


            <details class="quote">
              <summary>Source code in <code>democracy_sim/participation_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_av_area_color_dst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method updates the av_area_color_dst attribute of the model.</span>
<span class="sd">    Beware: On overlapping areas, cells are counted several times.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sums</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_colors</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">areas</span><span class="p">:</span>
        <span class="n">sums</span> <span class="o">+=</span> <span class="n">area</span><span class="o">.</span><span class="n">color_distribution</span>
    <span class="c1"># Return the average color distributions</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">av_area_color_dst</span> <span class="o">=</span> <span class="n">sums</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_areas</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.expand", "navigation.indexes", "navigation.sections", "navigation.tabs", "toc.follow", "toc.integrate", "search.share", "search.highlight", "search.suggest", "content.action.edit"], "search": "../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}, "version": null}</script>
    
    
  
      <script src="../../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  <script src="../../../../assets/javascripts/custom.058c863c.min.js"></script>

  </body>
</html>